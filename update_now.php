<?php
/**
 * ุชุญุฏูุซ ุตูุญุฉ "ูู ูุญู" - Direct Update
 * ูู ุจุชุดุบูู ูุฐุง ุงูููู ูู Terminal: php update_now.php
 */

// ุชุญููู ุฅุนุฏุงุฏุงุช CodeIgniter
define('BASEPATH', dirname(__FILE__).'/');
define('ENVIRONMENT', 'production');
$_SERVER['REQUEST_METHOD'] = 'GET';

// ุชุญููู ููู ุงูุฅุนุฏุงุฏุงุช
require_once(BASEPATH.'application/config/database.php');

echo "==========================================\n";
echo "   ุชุญุฏูุซ ุตูุญุฉ ูู ูุญู - Update About Us   \n";
echo "==========================================\n\n";

// ุนุฑุถ ูุนูููุงุช ุงูุงุชุตุงู
echo "๐ ูุนูููุงุช ุงูุงุชุตุงู:\n";
echo "   Host: " . $db['default']['hostname'] . "\n";
echo "   Database: " . $db['default']['database'] . "\n";
echo "   User: " . $db['default']['username'] . "\n\n";

// ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
try {
    $mysqli = new mysqli(
        $db['default']['hostname'],
        $db['default']['username'],
        $db['default']['password'],
        $db['default']['database']
    );

    if ($mysqli->connect_error) {
        die("โ ูุดู ุงูุงุชุตุงู: " . $mysqli->connect_error . "\n");
    }

    echo "โ ุชู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ!\n\n";

    // ุชุนููู ุงูุชุฑููุฒ
    $mysqli->set_charset("utf8mb4");

    // ุงููุญุชูู ุงูุฌุฏูุฏ
    $new_content = '<div class="about-us-content" style="direction: rtl; text-align: right; line-height: 1.8;">
    <h1 style="font-size: 2.5em; color: #2c3e50; margin-bottom: 20px; text-align: center;">ููุตุฉ "ุงุณุชูุฑ"</h1>
    
    <p style="font-size: 1.1em; margin-bottom: 20px;">
        ูุน ุงูุชุณุงุฑุน ู ุงูุชุบูุฑ ุงูุชููู ูู ุงูุฃุนูุงู ุงููุงุถูุฉุ ุฃุฑุชุฆููุง ุงุณุชุญุฏุงุซ ููุตุฉ "ุงุณุชูุฑ"ุ ู ูู ุฃูุงุฏูููุฉ ูุฑูุฏุฉ ูู ููุนูุงุ ุนูู ุนูุณ ุฃู ูุณุงุญุฉ ุชุนููููุฉ ุฃุฎุฑูุ ุตูููุช ูุฐู ุงูููุตุฉ ุจุฑุคูุฉ ูุงุถุญุฉ: ุฃู ุชุฌูุน ุจูู ุฃุฎุตุงุฆูู ุงููุทู ูุงููุบุฉุ ูุฃุฎุตุงุฆูู ุงูุนูุงุฌ ุงููุธูููุ ูุฃุฎุตุงุฆูู ุงูุนูุงุฌ ุงูุทุจูุนูุ ูููุฏูู ุงูุฑุนุงูุฉ ุงูุทุจูุฉุ ูุงูุฃูุงููุ ูุงูุนุงุฆูุงุช ูู ุฑุญูุฉ ูุดุชุฑูุฉ ูู ุงูุชุนูู ูุงูููู ูุงููุนุฑูุฉ.
    </p>
    
    <p style="font-size: 1.1em; margin-bottom: 20px;">
        ุขููุง ุจุจูุงุก ูุถุงุกู ูุณุชุทูุน ููู ุงููุชุฎุตุตูู ุงููุตูู ุฅูู ุฃุญุฏุซ ุงูุฃุจุญุงุซ ู ุงูุฏูุฑุงุช ู ุงููุนุฑูุฉ ุจุฃุณุงููุจ ุงูุนูุงุฌ ู ุงูุชุฏุฎู ู ุงูุชุทูุฑุ ู ููุง ูุฌุฏ ููู ุงูุฃูุงูู ูุงูุนุงุฆูุงุช ูุตุงุฏุฑ ููุซููุฉ ูุฏุนู ุฃุญุจูุชูู ูู ุงูููุฒู.
    </p>
    
    <h2 style="font-size: 2em; color: #34495e; margin-top: 30px; margin-bottom: 20px;">ูุง ุงูุฐู ูุฌุนู ููุตุฉ "ุงุณุชูุฑ" ูุฎุชููุฉุ</h2>
    
    <p style="font-size: 1.1em; margin-bottom: 20px;">
        ุฃููุง ุชูุฏู ุฏูุฑุงุช ุชุฏุฑูุจูุฉ ูุฏููุนุฉ ูููุฏูููุง ุฎุจุฑุงุก ุฑุงุฆุฏูู ูู ูุฌุงูุงุช ุงูุชุฃููู ู ุงูุทุจ ุงููุณุงูุฏุ ููุง ุชููุญ ุงููุชุฎุตุตูู ูููุฏูู ุงูุฑุนุงูุฉ ูุฑุตุฉ ููุญุตูู ุนูู ุชุฏุฑูุจ ูุนุชูุฏ ูุงุฆู ุนูู ุงูุฃุฏูุฉ ู ุนูู ุฃุณุณ ุนูููุฉ ู ุนูููุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ.
    </p>
    
    <p style="font-size: 1.1em; margin-bottom: 20px;">
        ุชููุฑ ููุชุจุฉ ูู ุงูููุงูุงุช ุงูุฃูุงุฏูููุฉ ุงููุฌุงููุฉุ ูุชุจูู ุงููุนุฑูุฉ ููุชูุญุฉ ููุชุงุญุฉ ููู ูู ูุณุนู ุฅูู ุงูููู ู ุงูุชุนูู ูุฃุตุญุงุจ ุงูุงุฎุชุตุงุต ู ุงูุทูุงุจ ุงูุฌุงูุนููู ู ุงูุฃูุงูู ุนูู ุญุฏ ุณูุงุกุ ุจุงุณุชุฎุฏุงู ูุบุฉ ุนูููุฉ ูุจุงุดุฑุฉ ู ุจุณูุทุฉ ุชุชูุญ ููุฌููุน ุงูููู ู ุงูุชุนูู.
    </p>
    
    <p style="font-size: 1.1em; margin-bottom: 20px;">
        ุชุชูุญ ุฃูุดุทุฉ ูุฃูุฑุงู ุนูู ูุงุจูุฉ ููุชุญูููุ ููุณุช ููุฌูุฉ ูููุนุงูุฌูู ูุญุณุจุ ุจู ุฃูุถูุง ููุฃูุงูู ูุงุณุชุฎุฏุงููุง ูู ุงูุฑูุชูู ุงูููููุ ูุชุญููู ุงููุญุธุงุช ุงูุนุงุฏูุฉ ุฅูู ูุฑุต ููุชุนููู ูุงูููู.
    </p>
    
    <h2 style="font-size: 2em; color: #34495e; margin-top: 30px; margin-bottom: 20px;">ุฑุคูุชูุง</h2>
    
    <p style="font-size: 1.1em; margin-bottom: 20px;">
        ู ุงููุฏู ุงูุฃุณูู ููููุตุฉ ูู ุฃู ุชุตุจุญ ุฃูุซุฑ ูู ูุฌุฑุฏ ููุชุจุฉ ุฑูููุฉุ ุจู ุฃู ุชุตุจุญ ุฅูู ูุฌุชูุน ุนููู ูุชูุงูู. ูุชูุงุตู ููู ุงูุฃุฎุตุงุฆููู ุนุจุฑ ุงูุญุฏูุฏุ ููุชุจุงุฏููู ุงูุงุณุชุฑุงุชูุฌูุงุช ูุงูุฎุจุฑุงุช. ูููุถู ุฅููู ุงูุฃูุงูู ููุชุนูู ู ุงูุชุทูุฑุ ููุฌุฏูุง ุงูุทูุฃูููุฉ ุจุฃููู ููุณูุง ูุญุฏูู ูู ุชุญุฏูุงุชูู. ููุญุตู ููุฏูู ุงูุฑุนุงูุฉ ุนูู ุฃุฏูุงุช ุชููุญูู ุงููุฏุฑุฉ ุนูู ุฏุนู ุงูุฃุทูุงู ูุงูุจุงูุบูู ููุจุงุฑ ุงูุณู ุจุดูู ุฃูุถู.
    </p>
    
    <p style="font-size: 1.1em; margin-bottom: 20px;">
        ููุน ูู ุฏูุฑุฉ ูุชู ุฅููุงุคูุงุ ููู ููุงู ูููุฑุฃุ ููู ูุฑูุฉ ุนูู ุชูุณุชุฎุฏู ูู ุงูููุฒูุ ุชูุชุฑุจ ููุตุฉ "ุงุณุชูุฑ" ูู ุชุญููู ุฑุคูุชูุง: ุฌุนู ุงููุนุฑูุฉ ุงูุนูุงุฌูุฉ ุดุงููุฉุ ุนูููุฉุ ููุงุฏุฑุฉ ุนูู ุฅุญุฏุงุซ ุชุบููุฑ ุญูููู ููู ูู ูุญุชุงุฌูุง.
    </p>
    
    <p style="font-size: 1.1em; margin-bottom: 20px;">
        ูููุฐุงุ ูุง ุจุฏุฃ ูููุฑุฉ ุจุณูุทุฉุ ููุง ููุตุจุญ ุญุฑูุฉ ุชุนููููุฉ ูุดุชุฑูุฉุ ููุตูุน ุฌุณุฑูุง ุจูู ุฎุจุฑุฉ ุงููุชุฎุตุตูู ูุฑุนุงูุฉ ุงูุนุงุฆูุงุชุ ููููุฑ ุงูุทุฑูู ูุญู ุนุงูู ุชุชูุงูุฑ ููู ุงููุนุฑูุฉ ูุงูุฏุนู ููุฌููุน.
    </p>
</div>';

    echo "๐ ุฌุงุฑู ุชุญุฏูุซ ุงููุญุชูู...\n";

    // ุชุฌููุฒ ุงูุงุณุชุนูุงู
    $stmt = $mysqli->prepare("UPDATE frontend_settings SET value = ? WHERE `key` = 'about_us'");
    $stmt->bind_param("s", $new_content);

    // ุชูููุฐ ุงูุชุญุฏูุซ
    if ($stmt->execute()) {
        $affected = $mysqli->affected_rows;
        
        if ($affected > 0) {
            echo "\nโ ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ!\n";
            echo "   ุงูุณุฌูุงุช ุงููุญุฏุซุฉ: $affected\n\n";
            echo "๐ ุชุญูู ูู ุงูุตูุญุฉ:\n";
            echo "   https://esttamer.com/home/about_us\n\n";
        } else {
            echo "\nโ๏ธ  ูู ูุชู ุชุญุฏูุซ ุฃู ุณุฌูุงุช.\n";
            echo "   ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:\n";
            echo "   - ุงููุญุชูู ูุญุฏุซ ุจุงููุนู\n";
            echo "   - ุงูููุชุงุญ 'about_us' ุบูุฑ ููุฌูุฏ\n\n";
        }
    } else {
        echo "\nโ ุฎุทุฃ ูู ุงูุชุญุฏูุซ: " . $stmt->error . "\n";
    }

    $stmt->close();
    $mysqli->close();

    echo "==========================================\n";
    echo "         ุชู ุฅููุงุก ุงูุนูููุฉ!               \n";
    echo "==========================================\n";

} catch (Exception $e) {
    die("\nโ ุฎุทุฃ: " . $e->getMessage() . "\n");
}
?>

